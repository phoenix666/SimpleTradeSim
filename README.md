# SimpleTradeSim

Проект для загрузки и хранения биржевых данных (свечей) в браузере.

## Структура

- **IndexedDB** — база данных в браузере (CandlesDB, таблица candles)
- **localStorage** — больше не используется (был слишком большой)

## Функции

### Загрузка файла
- При выборе CSV/TXT файла автоматически:
  1. Определяется разделитель (;, ,, :, пробел, tab)
  2. Находится блок из 4 колонок O-H-L-C по валидации
  3. Данные сохраняются в IndexedDB

### API IndexedDB

```js
// Открыть базу (вызывается при старте)
await openDB()

// Получить все свечи
await getAllCandles()

// Получить диапазон (для графиков: с какой позиции, сколько)
await getCandleRange(start, count)

// Общее количество
await getCandleCount()

// Очистить базу
await clearCandles()
```

### Кнопки
- **Выбрать файл** — загрузить CSV/TXT с свечами
- **Очистить базу** — удалить все данные (активна только если есть данные)

## Формат данных

Каждая свеча хранится как:
```js
{
  id: number,      // автоинкремент
  open: number,
  high: number,
  low: number,
  close: number
}
```

## Отладка

Первые 20 свечей выводятся на страницу. Это можно закомментировать в `index.html`.

## Как открыть

Просто открыть `index.html` в браузере. DevTools → Application → IndexedDB → candles — просмотр данных в браузере.
